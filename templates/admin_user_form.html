{% extends "admin_base.html" %}

{% block title %}{{ 'Crear' if mode == 'create' else 'Editar' }} Usuario{% endblock %}

{% block head_extra %}
<style>
    @media (max-width: 768px) {
        .form-group {
            margin-bottom: 15px;
        }
        
        .btn {
            width: 100%;
            margin-bottom: 10px;
        }
    }
</style>
{% endblock %}

{% block content %}
    <h1 class="page-header">{{ 'Crear Nuevo' if mode == 'create' else 'Editar' }} Usuario</h1>
    
    <form method="POST" action="{{ url_for('admin_create_user_post') if mode == 'create' else url_for('admin_edit_user_post', user_id=target_user.id) }}">
        <div class="form-group">
            <label for="username">Nombre de Usuario:</label>
            <input type="text" class="form-control" id="username" name="username" value="{{ target_user.username if mode == 'edit' else '' }}" required>
        </div>
        <div class="form-group">
            <label for="password">Contraseña ({{ 'requerida para crear' if mode == 'create' else 'dejar vacío para no cambiar' }}):</label>
            <input type="password" class="form-control" id="password" name="password" {{ 'required' if mode == 'create' else '' }}>
        </div>
        <div class="checkbox">
            <label>
                <input type="checkbox" name="is_admin" value="True" {% if mode == 'edit' and target_user.is_admin %}checked{% endif %}> Es Administrador
            </label>
        </div>
        <button type="submit" class="btn btn-success">Guardar Usuario</button>
        <a href="{{ url_for('admin_list_users') }}" class="btn btn-default">Cancelar</a>
    </form>
{% endblock %}